Параллельки. Лабораторная работа 3. Вариант 1

I. Состав проекта
- C++ 17
- CUDA Toolkit 13.1
- Компилятор nvcc (в комплекте с CUDA Toolkit)
- OpenCV 4.12.0
- Visual Studio Code

II. Структура проекта

- .vscode/ (папка с настройками импорта, компиляции и запуска в VS Code)
- include/ (папка для .h файлов библиотек, пустая)
- input/ (папка для входных изображений, gitignore, создается автоматически, но лучше вручную создать)
- lib/ (папка для .cpp файлов библиотек, пустая)
- logs/ (папка для логов, gitignore, создается автоматически)
- output/ (папка для выходных изображений, gitignore, создается автоматически)
- .gitignore
- gpu_functions_a.cu (вспомогательный файл с функциями на GPU для программы A)
- gpu_functions_b.cu (вспомогательный файл с функциями на GPU для программы B)
- logging.cpp (вспомогательный файл для сохранения логов)
- logrecord_a.cpp (структура логов для программы A)
- logrecord_b.cpp (структура логов для программы B)
- program_a.cu (основной файл программы A)
- program_b.cu (основной файл программы B)

III. Описание программ

Программа A

Загружает изображение (любой формат, обрабатываемый OpenCV), проводит бинаризацию и эрозию при помощи графического процессора (GPU).
1. Получает на вход изображение (inputImage) (по умолчанию из директории input/).
2. Для каждого пикселя вычисляет интенсивность (среднее значение по каналам RGB) и сравнивает с пороговым значение (threshold).
3. Пиксели со значением меньше порогового окрашивает в черный цвет, пиксели со значением больше - в белый.
4. Полученный бинарное изображение сохраняет (по умолчанию в директории output/output_a).
5. Проводит операцию эрозии для каждого пикселя бинарного изображения с указанным шагом (step).
6. Полученное изображение сохраняет (по умолчанию в директории output/output_a).
7. Записывает в лог параметры и время выполнения операций на GPU, затем сохраняет (по умолчанию в директории logs/logs_a).

Программа Б

Загружает изображение (любой формат, обрабатываемый OpenCV), пропорционально уменьшает изображение при помощи графического процессора (GPU).
1. Получает на вход изображение (inputImage) (по умолчанию из директории input/).
2. Проводит для каждого пикселя и его соседей Гауссово размытие.
3. Уменьшает изображение в указанное кол-во раз (mult), заменяя значения каналов пикселей значениями, полученными на предыдущем шаге.
4. Полученное изображение сохраняет (по умолчанию в директории output/output_a).
5. Записывает в лог параметры и время выполнения операций на GPU, затем сохраняет (по умолчанию в директории logs/logs_a).

IV. Инструкция по работе

1. Загрузить все файлы проекта.
2. Установить все зависимости проекта (C++, CUDA Toolkit, OpenCV).
3. Настроить компилятор nvcc для загрузки библиотеки OpenCV (в том числе, opencv_world4120.lib).
4. Зарузить Изображения в папку input/ (создать папку при необходимости).
5. Выбрать нужный файл (program_a.cu или program_b.cu). Перечислить имена всех нужных изображений (имена файлов с указанием формата) в массиве imageFiles.
6. Указать номер нужного изображения в поле imageName.
7. Указать нужное кол-во потоков в полях xThreads и yThreads (при необходимости).
8. Выбрать нужный режим вывода дополнительной информации в консоль при помощи поля DEBUG (по умолчанию false).
9. Настроить остальные параметры программы

9.1. Программа A:
- step (шаг эрозии, целочисленный);
- threshold (пороговое значение, целочисленное).

9.2. Программа B:
- mult (коэффициент уменьшения, целочисленный).
10. Отредактировать структуру записей лога (при необходимости).
11. Отредактировать весь остальной код (насколько необходимо).
12. ...
13. PROFIT
